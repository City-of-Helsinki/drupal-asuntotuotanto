(this["webpackJsonpasuntomyynti-react"]=this["webpackJsonpasuntomyynti-react"]||[]).push([[0],{107:function(e,t,a){},11:function(e,t,a){e.exports={container:"SearchForm_container__3AGoo",form:"SearchForm_form__1eFat",row:"SearchForm_row__1okry",column:"SearchForm_column__GEKhI",isLoading:"SearchForm_isLoading__1rGXv",canShimmer:"SearchForm_canShimmer__7W_wB",placeHolderShimmer:"SearchForm_placeHolderShimmer__3uS_6",divider:"SearchForm_divider__3KAW3",header:"SearchForm_header__r29Wv",showMoreButton:"SearchForm_showMoreButton__21LGr",expand:"SearchForm_expand__S7kU4"}},136:function(e,t,a){"use strict";a.r(t);var n=a(4),i=a(76),r=a(55),c=a(88);i.a.use(r.e).init({resources:c,lng:"fi",keySeparator:!1,interpolation:{escapeValue:!1}});i.a;var o=a(0),s=a.n(o),l=a(41),u=a.n(l),j=a(59);a(107),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var p,d,_=a(7),m=a(50),b=a.n(m),h=a(148),f=a(18),O=a.n(f),v=a(36),g=a.n(v),x=a(151),y=a(141),k=a(142),w=function(e){var t=e.apartment,a=Object(x.a)().t,i=Object(o.useState)(window.innerWidth),r=Object(_.a)(i,2),c=r[0],s=r[1],l=Object(o.useState)(!1),u=Object(_.a)(l,2),j=u[0],p=u[1],d=c>768,m=c<768,b=function(){s(window.innerWidth)};Object(o.useEffect)((function(){return window.addEventListener("resize",b),function(){return window.removeEventListener("resize",b)}}),[]);var h=t.apartment_number,f=t.apartment_structure,O=t.application_url,v=t.floor,w=t.living_area,S=t.sales_price;return Object(n.jsxs)("div",{className:g.a.container,children:[Object(n.jsxs)("div",{className:g.a.content,style:j?{display:"flex",flex:5}:{display:"flex",flex:5,margin:0},children:[Object(n.jsxs)("div",{className:g.a.apartmentCell,style:j&&m?{flex:2,marginBottom:24}:{flex:2},onClick:function(){m&&p(!j)},children:[Object(n.jsx)("strong",{children:h}),Object(n.jsx)("div",{children:f}),m&&Object(n.jsx)(y.a,{style:{marginLeft:"auto"},size:"m"})]}),(j||d)&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("div",{className:g.a.cell,style:{flex:1},children:[m&&Object(n.jsxs)("span",{style:{flex:1},children:[a("SEARCH:floor")," "]}),Object(n.jsx)("span",{style:{flex:1},children:v})]}),Object(n.jsxs)("div",{className:g.a.cell,style:{flex:1},children:[m&&Object(n.jsx)("span",{style:{flex:1},children:a("SEARCH:area")}),Object(n.jsxs)("span",{style:{flex:1},children:[w," m\xb2"]})]}),Object(n.jsxs)("div",{className:g.a.cell,style:{flex:1},children:[m&&Object(n.jsx)("span",{style:{flex:1},children:a("SEARCH:free-of-debt-price")}),Object(n.jsxs)("span",{style:{flex:1},children:[S/100," \u20ac"]})]})]})]}),(j||d)&&Object(n.jsxs)("div",{className:g.a.buttons,style:{flex:"3 3 0"},children:[Object(n.jsx)(k.a,{className:g.a.getToKnowButton,variant:d?"supplementary":"secondary",children:a("SEARCH:info")}),Object(n.jsx)("a",{href:O||"",children:Object(n.jsx)(k.a,{className:g.a.createApplicationButton,variant:d?"secondary":"primary",children:a("SEARCH:apply")})})]})]})},S=a(143),C=function(e){var t=e.project,a=e.hideImgOnSmallScreen,i=void 0!==a&&a,r=Object(x.a)().t,c=Object(o.useState)(!1),s=Object(_.a)(c,2),l=s[0],u=s[1],j=Object(o.useState)(1),p=Object(_.a)(j,2),d=p[0],m=p[1],b=Object(o.useState)(window.innerWidth),f=Object(_.a)(b,2),v=f[0],g=f[1],y=function(){g(window.innerWidth)};Object(o.useEffect)((function(){return window.addEventListener("resize",y),function(){window.removeEventListener("resize",y)}}),[]);var C=t.apartments,N=t.street_address,R=t.district,E=t.estimated_completion,A=t.estimated_completion_date,P=t.housing_company,L=t.main_image_url,H=t.publication_end_time,F=t.ownership_type,T=C.length>10,B=function(e){e!==d&&m(e)},M=C.slice(10*d-10,10*d),I=v<993;return Object(n.jsxs)("div",{className:O.a.container,children:[Object(n.jsxs)("div",{className:O.a.content,children:[Object(n.jsx)("div",{className:O.a.imageContainer,style:i&&I?{display:"none"}:{},children:Object(n.jsx)("img",{src:L,alt:P+" "+r("SEARCH:project")})}),Object(n.jsxs)("div",{className:O.a.info,children:[Object(n.jsxs)("div",{className:O.a.details,children:[Object(n.jsxs)("div",{className:O.a.titles,children:[Object(n.jsx)("h2",{style:{marginBottom:5},children:P}),Object(n.jsxs)("div",{style:{marginBottom:5},children:[Object(n.jsxs)("b",{children:[R,","]})," ",N]}),Object(n.jsx)("span",{className:O.a.label,children:F})]}),Object(n.jsxs)("div",{className:O.a.deadlines,children:[Object(n.jsxs)("div",{className:O.a.completionTime,children:[Object(n.jsx)(S.b,{style:{marginRight:10},role:"presentation"}),E," ",Object(h.a)(new Date(A),"MM/yyyy")]}),Object(n.jsxs)("div",{className:O.a.applicationTime,children:[Object(n.jsx)(S.a,{style:{marginRight:10},role:"presentation"}),r("SEARCH:application-open")," ",Object(h.a)(new Date(H),"dd.MM.yyyy 'klo' hh.mm")," ",r("SEARCH:until")]})]})]}),Object(n.jsxs)("div",{className:O.a.controls,children:[Object(n.jsx)(k.a,{className:O.a.detailsButton,variant:"secondary",children:r("SEARCH:learn-more")}),Object(n.jsxs)("button",{className:O.a.apartmentListButton,onClick:function(){u(!l)},children:[C.length," ",r("SEARCH:apartments-available")," ",l?Object(n.jsx)(S.g,{role:"presentation",style:{marginLeft:10}}):Object(n.jsx)(S.h,{role:"presentation",style:{marginLeft:10}})]})]})]})]}),l&&Object(n.jsxs)("div",{className:O.a.apartmentList,children:[Object(n.jsxs)("div",{className:O.a.apartmentListTable,children:[Object(n.jsxs)("div",{className:O.a.apartmentListHeaders,children:[Object(n.jsxs)("div",{style:{flex:5,display:"flex"},children:[Object(n.jsx)("div",{className:O.a.headerCell,style:{flex:2},children:r("SEARCH:apartment")}),Object(n.jsx)("div",{className:O.a.headerCell,style:{flex:1},children:r("SEARCH:floor")}),Object(n.jsx)("div",{className:O.a.headerCell,style:{flex:1},children:r("SEARCH:area")}),Object(n.jsx)("div",{className:O.a.headerCell,style:{flex:1},children:r("SEARCH:free-of-debt-price")})]}),Object(n.jsx)("div",{className:O.a.headerFiller,style:{flex:"3 3 0"}})]}),M.map((function(e){return Object(n.jsx)(w,{apartment:e},e.uuid)}))]}),T&&Object(n.jsx)("div",{className:O.a.pagination,children:Object(n.jsx)("div",{style:{display:"flex"},children:function(){for(var e=Math.ceil(C.length/10),t=[],a=function(e){t.push(Object(n.jsx)("button",{className:O.a.paginationButton,onClick:function(){return B(e)},style:e===d?{border:"2px solid #1a1a1a"}:{},value:e,children:e},e))},i=1;i<=e;i++)a(i);return t}()})})]})]})},N=function(e){var t=e.searchResults,a=e.header,i=e.openMap,r=Object(x.a)().t;return Object(n.jsxs)("div",{className:b.a.container,children:[Object(n.jsxs)("header",{children:[Object(n.jsxs)("div",{className:b.a.titleContainer,children:[Object(n.jsx)("h1",{children:a}),Object(n.jsxs)("div",{className:b.a.resultsCount,children:[r("SEARCH:total")," ",t.length," ",r("SEARCH:apartments")]})]}),i&&Object(n.jsx)("div",{children:Object(n.jsx)(k.a,{className:b.a.showButton,variant:"secondary",onClick:i,children:Object(n.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(n.jsx)(S.f,{style:{marginRight:20}})," ",r("SEARCH:show-on-map")]})})})]}),Object(n.jsx)("div",{className:b.a.resultWrapper,children:t.map((function(e){return Object(n.jsx)(C,{project:e},e.id)}))})]})},R=a(8),E=a(11),A=a.n(E),P=a(22),L=a(19),H=function(){var e=Object(o.useState)(new URLSearchParams),t=Object(_.a)(e,2),a=t[0],n=t[1],i=Object(L.e)().search;return Object(o.useEffect)((function(){n(new URLSearchParams(i))}),[i]),a},F=a(150),T=a(93),B=a.n(T),M=function(e,t,a){var n=e.get(t);return n?n.split(","):a},I=function(){var e=H(),t=Object(L.d)(),a=Object(o.useCallback)((function(t){return M(e,t,[])}),[e]),n=function(a,n){e.set(a,n),t.push("?".concat(e.toString()))};return{getAllFilters:function(){return Array.from(e.entries())},getFilter:function(t){return e.get(t)||""},getFilters:a,addFilter:function(t,a){var i=M(e,t,[]);i.push(a),n(t,i.join(","))},setFilter:n,setFilters:function(e,t){n(e,t.join(","))},removeFilter:function(a,i){var r=M(e,a,[]).filter((function(e){return e!==i}));if(0===r.length)return e.delete(a),void t.push("?".concat(e.toString()));n(a,r.join(","))},clearFilter:function(a){e.delete(a),t.push("?".concat(e.toString()))}}},K=function(e){var t=e.name,a=e.from,i=e.to,r=I(),c=r.getFilters,o=r.setFilters,s=c(t),l=Object(_.a)(s,2),u=l[0],j=void 0===u?"":u,p=l[1],d=void 0===p?"":p,m=[j,d],b=function(e){return function(a){var n=a.target.value||"",i=m.map((function(t,a){return a===e?n:t}));o(t,i)}};return Object(n.jsxs)("div",{className:B.a.container,children:[Object(n.jsx)(F.a,Object(R.a)(Object(R.a)({},a),{},{id:a.label,value:j,onChange:b(0)})),Object(n.jsx)(F.a,Object(R.a)(Object(R.a)({},i),{},{id:i.label,value:d,onChange:b(1)}))]})},W=a(68),D=a.n(W),z=a(144),V=function(e){var t=e.name,a=e.items,i=e.label,r=e.isWrapped,c=I(),o=c.addFilter,s=c.removeFilter,l=c.getFilters,u=Object(x.a)().t,j=l(t),p=function(e){return function(){j.includes(e)?s(t,e):o(t,e)}};return Object(n.jsxs)("div",{className:r?D.a.isWrapped:"",children:[!r&&i&&Object(n.jsx)("div",{className:D.a.header,children:i}),a.map((function(e,t){return Object(n.jsx)("div",{className:D.a.item,children:Object(n.jsx)(z.a,{id:"".concat(i,"-").concat(e,"-").concat(t),onChange:p(e),label:u("ES:".concat(e)),checked:j.includes(e)})},"".concat(e,"-").concat(t))}))]})};!function(e){e[e.MultiSelect=0]="MultiSelect",e[e.Input=1]="Input",e[e.Range=2]="Range"}(p||(p={})),function(e){e.LivingArea="living_area",e.ProjectBuildingType="project_building_type",e.ProjectDistrict="project_district",e.ProjectNewDevelopmentStatus="project_new_development_status",e.Properties="properties",e.RoomCount="room_count",e.SalesPrice="sales_price"}(d||(d={}));var Q=a(94),q=a.n(Q),U=function(e){var t=e.name,a=e.label,i=e.isWrapped,r=I(),c=r.getFilter,o=r.setFilter,s=c(t)||"";return Object(n.jsx)(F.a,{id:"".concat(t,"-").concat(a),label:a,value:s,onChange:function(e){o(t,e.target.value||"")},className:q.a.priceInput,style:i?{padding:"14px"}:{}})},G=function(e){var t=e.name,a=e.onFilter,i=e.isWrapped,r=void 0!==i&&i,c=e.items,s=e.type,l=e.label,u=Object(P.a)(e,["name","onFilter","isWrapped","items","type","label"]),j=H(),d=Object(o.useCallback)((function(){a&&a(Object(R.a)({label:l,type:s,items:c},u))}),[c,l,a,s,u]);switch(Object(o.useEffect)((function(){d()}),[j,d]),s){case p.MultiSelect:return Object(n.jsx)(V,{name:t,label:l,isWrapped:r,items:c});case p.Range:var m=Object(_.a)(c,2),b=m[0],h=m[1];return Object(n.jsx)(K,{name:t,from:b,to:h});case p.Input:return Object(n.jsx)(U,{name:t,label:l,isWrapped:r,items:c});default:return null}},X=a(37),Y=a.n(X),J=function(e){var t=e.name,a=Object(P.a)(e,["name"]);switch(t){case"location":return Object(n.jsx)(S.e,Object(R.a)({},a));case"home":return Object(n.jsx)(S.d,Object(R.a)({},a));default:return null}},Z=function(e,t){Object(o.useEffect)((function(){var a=function(a){e.current&&!e.current.contains(a.target)&&t()};return document.addEventListener("click",a),function(){document.removeEventListener("click",a)}}))},$=function(e){var t=e.name,a=e.icon,i=Object(P.a)(e,["name","icon"]),r=Object(o.useState)(!1),c=Object(_.a)(r,2),s=c[0],l=c[1],u=Object(o.useState)(t),j=Object(_.a)(u,2),p=j[0],d=j[1],m=Object(o.useRef)(null),b=I(),h=b.clearFilter,f=b.getFilters,O=!!(0,b.getFilter)(t);Z(m,(function(){l(!1)}));var v="".concat(Y.a.container," ").concat(s?Y.a.active:""," ").concat(!s&&O?Y.a.underline:"");return Object(n.jsxs)("div",{className:v,ref:m,children:[Object(n.jsxs)("label",{className:Y.a.label,onClick:function(){return l(!s)},children:[a&&Object(n.jsx)(J,{name:a,className:Y.a.icon}),Object(n.jsx)("div",{className:Y.a.title,children:p})]}),Object(n.jsx)("div",{className:Y.a.content,children:Object(n.jsx)(G,Object(R.a)({name:t,onFilter:function(e){var a=e.label,n=e.getLabel,i=f(t);d(i.length>0?n(i):a)},isWrapped:!0},i))}),Object(n.jsx)("div",{className:Y.a.footer,children:Object(n.jsx)("button",{onClick:function(){h(t),setTimeout((function(){l(!1)}),50)},disabled:!O,className:Y.a.clearButton,children:"Tyhjenn\xe4 valinta"})})]})},ee=a(95),te=a.n(ee),ae=function(e){var t=e.expand,a=e.children,i=Object(P.a)(e,["expand","children"]),r=Object(o.useState)(0),c=Object(_.a)(r,2),s=c[0],l=c[1],u=Object(o.useRef)(null),j=Object(o.useRef)(null),p=Object(o.useCallback)((function(){if(t){var e=(u.current||{}).clientHeight;l(e||0)}else l(0)}),[t]),d=Object(o.useCallback)((function(){j.current&&clearTimeout(j.current),j.current=setTimeout((function(){p()}),250)}),[p]);return Object(o.useEffect)((function(){return window.addEventListener("resize",d),function(){window.removeEventListener("resize",d)}}),[d]),Object(o.useEffect)((function(){p()}),[t,a,p]),Object(n.jsx)("div",Object(R.a)(Object(R.a)({},i),{},{children:Object(n.jsx)("div",{className:te.a.collapsible,style:{height:s},children:Object(n.jsx)("div",{ref:u,children:a})})}))},ne=a(15),ie=a(49),re=a(56),ce=a.n(re),oe=function(e){var t=e.config,a=I(),i=a.clearFilter,r=a.removeFilter,c=a.getAllFilters,o=Object(x.a)().t,s=c().reduce((function(e,a){var n=Object(_.a)(a,2),i=n[0],r=n[1],c=(t[i]||{}).getTagLabel;return c?[].concat(Object(ne.a)(e),Object(ne.a)(c(r))):e}),[]),l=function(e,a){return function(){return t[e].type===p.Range?i(e):r(e,a)}};return Object(n.jsx)("div",{className:ce.a.container,children:s.map((function(e,t){var a=Object(_.a)(e,3),i=a[0],r=a[1],c=a[2];return Object(n.jsxs)("button",{className:ce.a.tag,onClick:l(i,r),children:[Object(n.jsx)(ie.a,{className:ce.a.icon}),Object(n.jsx)("span",{className:ce.a.label,children:o("ES:".concat(c||r))})]},t)}))})},se=a(21),le=a.n(se),ue=a(35),je=a(66),pe=a(64),de=a.n(pe),_e=a(24),me=function(e){var t=Object(_.a)(e,2),a=t[0],n=t[1];return a&&n?"".concat(a,"-").concat(n," m\xb2"):a&&!n?"> ".concat(a," m\xb2"):!a&&n?"< ".concat(n," m\xb2"):""},be=a(96),he={project_district:function(e){return Object(R.a)(Object(R.a)({},e),{},{type:p.MultiSelect,icon:"location",getLabel:function(e){var t=Object(_.a)(e,1)[0];return t?t+(e.length>1?" +".concat(e.length-1):""):""}})},room_count:function(e){var t=e.suffix,a=void 0===t?"":t,n=e.items,i=Object(P.a)(e,["suffix","items"]);return Object(R.a)(Object(R.a)({},i),{},{items:n.map((function(e){return"".concat(e).concat(a)})),type:p.MultiSelect,icon:"home",getQuery:function(e){var t=[{terms:Object(_e.a)({},d.RoomCount,e.map((function(e){return parseInt(e)})))}];return e.includes("5+")&&t.push({range:Object(_e.a)({},d.RoomCount,{gte:4})}),t},getLabel:function(e){return function(e,t){return e.reduce((function(e,a){var n=Object(be.a)(a),i=n[0],r=n.slice(1).pop(),c="".concat(i).concat(r?"-"+r:"");return[].concat(Object(ne.a)(e),[t?c+t(i,r):c])}),[]).join(", ")}(e.map((function(e){return parseInt(e)})).sort().reduce((function(e,t){var a=e.pop()||[];return 0===a.length||a[a.length-1]===t-1?[].concat(Object(ne.a)(e),[[].concat(Object(ne.a)(a),[t])]):[].concat(Object(ne.a)(e),[a,[t]])}),[]),(function(e,t){return 5===t?"".concat(a,", 5+").concat(a):a||""}))}})},living_area:function(e){var t=Object(_.a)(e.items,2),a=t[0],n=t[1],i=e.suffix,r=Object(P.a)(e,["items","suffix"]);return Object(R.a)(Object(R.a)({},r),{},{type:p.Range,items:[{label:a||"",placeholder:i||""},{label:n||"",placeholder:i||""}],getQuery:function(e){var t=e.map((function(e){return parseInt(e)})),a=Object(_.a)(t,2),n=a[0],i=a[1];return[{range:Object(_e.a)({},d.LivingArea,Object(R.a)(Object(R.a)({},n?{gte:n}:{}),i?{lte:i}:{}))}]},getLabel:function(e){return me(e)},getTagLabel:function(e){var t=me(e.split(","));return[[d.LivingArea,t]]}})},sales_price:function(e){var t=Object(_.a)(e.items,1)[0],a=e.suffix,n=Object(P.a)(e,["items","suffix"]);return Object(R.a)(Object(R.a)({},n),{},{type:p.Input,items:[{label:t,placeholder:a||""}],getQuery:function(e){var t=Object(_.a)(e,1)[0];return[{range:Object(_e.a)({},d.SalesPrice,{lte:1e3*parseInt(t)})}]},getLabel:function(e){var t=Object(_.a)(e,1)[0];return"".concat(t," 000 ").concat(a)},getTagLabel:function(e){return[[d.SalesPrice,e,"".concat(e," 000 m\xb2")]]}})},project_building_type:function(e){return Object(R.a)(Object(R.a)({},e),{},{type:p.MultiSelect})},properties:function(e){return Object(R.a)(Object(R.a)({},e),{},{type:p.MultiSelect,getQuery:function(e){return e.map((function(e){return{term:Object(_e.a)({},e,!0)}}))}})},project_new_development_status:function(e){return Object(R.a)(Object(R.a)({},e),{},{type:p.MultiSelect})}},fe=function(e){return Object.keys(he).reduce((function(t,a){var n,i=Object(R.a)(Object(R.a)(Object(R.a)({},t[a]),{label:n=a,suffix:null,items:[],getQuery:function(e){return[{terms:Object(_e.a)({},n,e)}]},getLabel:function(e){return e.join(", ")},getTagLabel:function(e){return e.split(",").filter((function(e){return""!==e})).map((function(e){return[n,e]}))}}),e[a]||{});return Object(R.a)(Object(R.a)({},t),{},Object(_e.a)({},a,Object(R.a)({},he[a](i))))}),{})},Oe=function(){var e=H().get("lang")||"fi",t=function(){var t=Object(ue.a)(le.a.mark((function t(){var a,n;return le.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,de.a.get("/".concat(e,"/filters"));case 2:return a=t.sent,n=a.data,t.abrupt("return",fe(n));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(je.a)("filterConfig",t,{staleTime:86400,initialStale:!0})},ve=s.a.createContext(void 0),ge=function(e){var t=e.children,a=Oe().data;return Object(n.jsx)(ve.Provider,{value:a,children:t})},xe=function(e){var t=e.onSubmit,a=Object(o.useState)(!1),i=Object(_.a)(a,2),r=i[0],c=i[1],s=Object(o.useContext)(ve),l=s||{},u=l.project_district,j=l.room_count,p=l.living_area,m=l.sales_price,b=l.project_building_type,h=l.properties,f=l.project_new_development_status,O=!s;return Object(n.jsx)("div",{className:"".concat(A.a.container," ").concat(r?A.a.expand:""," ").concat(O?A.a.isLoading:""),children:Object(n.jsxs)("div",{className:A.a.form,children:[Object(n.jsx)("h1",{children:"Etsi Hitas-omistusasuntoja"}),Object(n.jsxs)("div",{className:A.a.row,children:[Object(n.jsx)("div",{className:"".concat(A.a.column," ").concat(A.a.canShimmer),children:u&&Object(n.jsx)($,Object(R.a)({name:d.ProjectDistrict},u))}),Object(n.jsx)("div",{className:"".concat(A.a.column," ").concat(A.a.canShimmer),children:j&&Object(n.jsx)($,Object(R.a)({name:d.RoomCount},j))}),Object(n.jsx)("div",{className:"".concat(A.a.column," ").concat(A.a.canShimmer),children:p&&Object(n.jsx)($,Object(R.a)({name:d.LivingArea},p))}),Object(n.jsx)("div",{className:"".concat(A.a.column," ").concat(A.a.canShimmer),children:m&&Object(n.jsx)($,Object(R.a)({name:d.SalesPrice},m))}),Object(n.jsx)("div",{className:"".concat(A.a.column," ").concat(A.a.canShimmer),children:!O&&Object(n.jsx)(k.a,{onClick:function(){return t()},children:"Submit"})})]}),Object(n.jsxs)(ae,{expand:r,children:[Object(n.jsx)("div",{className:A.a.row,children:Object(n.jsx)("div",{className:A.a.divider})}),Object(n.jsxs)("div",{className:A.a.row,children:[Object(n.jsx)("div",{className:A.a.column,children:b&&Object(n.jsx)(G,Object(R.a)({name:d.ProjectBuildingType},b))}),Object(n.jsx)("div",{className:A.a.column,children:h&&Object(n.jsx)(G,Object(R.a)({name:d.Properties},h))}),Object(n.jsx)("div",{className:A.a.column,children:f&&Object(n.jsx)(G,Object(R.a)({name:d.ProjectNewDevelopmentStatus},f))})]})]}),Object(n.jsx)("div",{className:A.a.row,children:s&&Object(n.jsx)(oe,{config:s})}),Object(n.jsx)("div",{className:A.a.row,children:Object(n.jsx)("div",{className:A.a.divider})}),Object(n.jsx)("div",{className:A.a.row,children:Object(n.jsx)("div",{className:A.a.column,children:Object(n.jsx)("button",{className:A.a.showMoreButton,onClick:function(){c(!r)},children:Object(n.jsx)("span",{children:r?"N\xe4yt\xe4 v\xe4hemm\xe4n valintoja":"N\xe4yt\xe4 enemm\xe4n valintoja"})})})})]})})},ye=a(57),ke=a.n(ye),we=function(e){var t=e.message;return Object(n.jsx)("div",{className:ke.a.container,children:Object(n.jsxs)("div",{className:ke.a.wrapper,children:[Object(n.jsxs)("div",{className:ke.a.content,children:[Object(n.jsx)(S.c,{style:{marginRight:26},size:"xl",role:"presentation"}),Object(n.jsx)("div",{children:t})]}),Object(n.jsx)(ie.a,{className:ke.a.closeIcon,size:"s",role:"presentation"})]})})},Se=function(){var e=Object(x.a)().i18n,t=H().get("lang");Object(o.useEffect)((function(){e.changeLanguage(t||"fi")}),[t,e])},Ce=function(){var e=Object(o.useState)({}),t=Object(_.a)(e,2),a=t[0],n=t[1],i=Object(o.useContext)(ve),r=I().getFilters,c=Object(o.useCallback)((function(){if(!i)return{};var e=Object.keys(i).reduce((function(e,t){var a=r(t),n=(i[t]||{}).getQuery;return 0!==a.length&&n?[].concat(Object(ne.a)(e),Object(ne.a)(n(a))):e}),[]);return 0===e.length?{}:{query:{bool:{must:e}}}}),[i,r]),s=Object(o.useCallback)((function(){var e=c();n(e)}),[c]);return Object(o.useEffect)((function(){s()}),[i]),{query:a,updateQuery:s}},Ne=function(e){var t=e.inner_hits.project_id.hits.hits,a=t[0]._source,n={};return Object.keys(a).forEach((function(e){if(e.includes("project_")){var t=e.split("project_")[1];n[t]=a[e]}})),n.apartments=t.map((function(e){return e._source})),n},Re=function(e){var t=function(){var t=Object(ue.a)(le.a.mark((function t(){var a,n,i;return le.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,de.a.post("http://dev.asuntomyynti-elastic.druidfi.wod.by/_search",Object(R.a)(Object(R.a)({},e),{},{collapse:{field:"project_id",inner_hits:{size:666,name:"project_id"}}}));case 2:return n=t.sent,i=n.data,t.abrupt("return",(null===i||void 0===i||null===(a=i.hits)||void 0===a?void 0:a.hits.map(Ne))||[]);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(je.a)(["searchResults",e],t,{initialStale:!0,initialData:[]})},Ee=a(149),Ae=function(){var e=Object(x.a)().t;return Object(n.jsx)(Ee.a,{label:e("error"),position:"top-right",autoClose:!0,type:"alert",children:e("SEARCH:something-wrong")})},Pe=a(98),Le=a.n(Pe),He=a(58),Fe=a.n(He),Te=a(146),Be=a(152),Me=a(147),Ie=a(44),Ke=a.n(Ie),We=function(e){var t=e.searchResults,a=e.closeMap,i=Object(x.a)().t,r=Object(o.useState)(void 0),c=Object(_.a)(r,2),s=c[0],l=c[1],u=function(e){var t=function(e){switch(e){case"PRE_MARKETING":return"#000000";case"ON_SALE":default:return"#0000bf"}}(e.state_of_sale),a=e.uuid===(null===s||void 0===s?void 0:s.uuid),i=Object(n.jsx)("div",{style:{marginLeft:-14,marginTop:-14,width:40,height:40,backgroundColor:a?t:"white",borderRadius:"50%",display:"flex",justifyContent:"center",alignItems:"center"},children:Object(n.jsx)(S.e,{size:"m",color:a?"white":t})});return Ke.a.divIcon({className:"custom-icon",html:Le.a.renderToString(i)})};return Object(n.jsxs)("div",{className:Fe.a.container,children:[Object(n.jsxs)("header",{children:[Object(n.jsxs)("div",{className:Fe.a.titleContainer,children:[Object(n.jsx)("h1",{children:i("SEARCH:all-apartments")}),Object(n.jsxs)("div",{className:Fe.a.resultsCount,children:[i("SEARCH:total")," ",t.length," ",i("SEARCH:apartments")]})]}),Object(n.jsx)("div",{children:Object(n.jsx)(k.a,{className:Fe.a.showButton,variant:"secondary",onClick:a,children:Object(n.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(n.jsx)(S.f,{style:{marginRight:20}})," ",i("SEARCH:show-as-list")]})})})]}),Object(n.jsxs)("div",{id:"mapid",children:[Object(n.jsxs)(Te.a,{center:function(){if(t.length>0){var e=t[0].coordinate_lon,a=t[0].coordinate_lon,n=t[0].coordinate_lat,i=t[0].coordinate_lat;return t.forEach((function(t){var r=t.coordinate_lon,c=t.coordinate_lat;e<r&&(e=r),(!a||a>r)&&(a=r),(!n||n<c)&&(n=c),(!n||n<c)&&(i=c)})),[(n-i)/2+i,(e-a)/2+a]}return[60.17,24.94]}(),zoom:12,maxBounds:[[59.4,23.8],[61.5,25.8]],children:[Object(n.jsx)(Be.a,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://tiles.hel.ninja/styles/hel-osm-bright/{z}/{x}/{y}.png"}),t.map((function(e){return Object(n.jsx)(Me.a,{icon:u(e),position:[e.coordinate_lat,e.coordinate_lon],eventHandlers:{click:function(){l(e)}}},e.uuid)}))]}),s&&Object(n.jsx)(C,{project:s,hideImgOnSmallScreen:!0})]})]})},De=function(){var e=Object(o.useState)(!1),t=Object(_.a)(e,2),a=t[0],i=t[1],r=Object(x.a)().t;Se();var c=Ce(),s=c.query,l=c.updateQuery,u=Re(s),j=u.data,p=u.isError,d=j.reduce((function(e,t){var a=t.state_of_sale;return Object(R.a)(Object(R.a)({},e),{},Object(_e.a)({},a,[].concat(Object(ne.a)(e[a]||[]),[t])))}),{}),m=d.FOR_SALE,b=void 0===m?[]:m,h=d.PRE_MARKETING,f=void 0===h?[]:h;return Object(n.jsxs)("div",{children:[Object(n.jsx)(xe,{onSubmit:l}),Object(n.jsx)(we,{message:"Duis ante tortor, dignissim vitae finibus at, pellentesque eget risus. Etiam nec mi ut lorem feugiat blandit nec a quam. Praesent luctus felis sit amet arcu imperdiet suscipit. Cras consectetur eros non lectus volutpat, sit amet ultricies nisi pellentesque. Mauris nec augue nec neque faucibus eleifend quis eu lacus."}),a?Object(n.jsx)(We,{searchResults:j,closeMap:function(){i(!1)}}):Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(N,{header:r("SEARCH:for-sale"),searchResults:b,openMap:function(){i(!0)}}),Object(n.jsx)(N,{header:r("SEARCH:pre-marketing"),searchResults:f})]}),p&&Object(n.jsx)(Ae,{})]})};u.a.render(Object(n.jsx)(s.a.StrictMode,{children:Object(n.jsx)(j.a,{children:Object(n.jsx)(ge,{children:Object(n.jsx)(De,{})})})}),document.getElementById("search")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},18:function(e,t,a){e.exports={container:"ProjectCard_container__1hFRP",content:"ProjectCard_content__1EVbR",info:"ProjectCard_info__284te",imageContainer:"ProjectCard_imageContainer__UbZ1A",details:"ProjectCard_details__qo-QX",completionTime:"ProjectCard_completionTime__-MdPq",applicationTime:"ProjectCard_applicationTime__3fec7",label:"ProjectCard_label__2Q3wr",controls:"ProjectCard_controls__1dgfg",detailsButton:"ProjectCard_detailsButton__2VJIE",apartmentListButton:"ProjectCard_apartmentListButton__3cAYN",apartmentList:"ProjectCard_apartmentList__1XZP2",apartmentListHeaders:"ProjectCard_apartmentListHeaders__394Po",headerCell:"ProjectCard_headerCell__H6Y4V",pagination:"ProjectCard_pagination__1dple",paginationButton:"ProjectCard_paginationButton__3wekg",headerFiller:"ProjectCard_headerFiller__1Gg0X"}},36:function(e,t,a){e.exports={container:"ApartmentRow_container__17ZZ9",cell:"ApartmentRow_cell__2R1MT",apartmentCell:"ApartmentRow_apartmentCell__2-pIo",buttons:"ApartmentRow_buttons__nttC-",createApplicationButton:"ApartmentRow_createApplicationButton__2oiDv",getToKnowButton:"ApartmentRow_getToKnowButton__2AlGT",content:"ApartmentRow_content__1pT5T"}},37:function(e,t,a){e.exports={container:"Dropdown_container__1YP-o",content:"Dropdown_content__2ZsRE",footer:"Dropdown_footer__2DxkY",active:"Dropdown_active__WNsWE",option:"Dropdown_option__1hPPz",underline:"Dropdown_underline__37-aK",title:"Dropdown_title__pv-eN",label:"Dropdown_label__lHjyS",icon:"Dropdown_icon__19HNe",clearButton:"Dropdown_clearButton__dXdH5"}},50:function(e,t,a){e.exports={container:"SearchResults_container__3eUQE",showButton:"SearchResults_showButton__1LOWG",titleContainer:"SearchResults_titleContainer__2Kuz5",resultsCount:"SearchResults_resultsCount__1VQQf",resultWrapper:"SearchResults_resultWrapper__PWUXt"}},56:function(e,t,a){e.exports={container:"TagList_container__1xbKs",tag:"TagList_tag__LTXEA",label:"TagList_label__1waQ0",icon:"TagList_icon__i6AuE"}},57:function(e,t,a){e.exports={container:"Notification_container__2MESX",wrapper:"Notification_wrapper__ai3Rj",content:"Notification_content__3uF8d",closeIcon:"Notification_closeIcon__1Ad0W"}},58:function(e,t,a){e.exports={container:"MapResults_container__thnjo",showButton:"MapResults_showButton__2k7hA",titleContainer:"MapResults_titleContainer__34Hmd",label:"MapResults_label__1_NQg",titles:"MapResults_titles__qHldt"}},68:function(e,t,a){e.exports={header:"CheckList_header__u93XA",item:"CheckList_item__2mgWM",isWrapped:"CheckList_isWrapped__1EYVC"}},88:function(e){e.exports=JSON.parse('{"en":{"SEARCH":{"all-apartments":"All apartments","apartment":"Apartment","apartments":"apartments","apartments-available":"Apartments available","application-open":"Application open","applications":"Applications","apply":"Apply","area":"Area","error":"Error","floor":"Floor","free-apartments":"Free apartments","free-of-debt-price":"Free of debt price","info":"Info","learn-more":"Learn more","project":"project","show-as-list":"Show as list","show-on-map":"Show on map","something-wrong":"Oops, something went wrong.","total":"Total","until":"until","for-sale":"For sale","pre-marketing":"Pre-marketing"},"ES":{"additional_information":"Additional information","apartment_number":"Apartment number","apartment_structure":"Apartment structure","application_url":"Application URL","balcony_description":"Balcony description","bathroom_appliances":"Bathroom appliances","condition":"Condition","debt_free_sales_price":"Debt free sales price","financing_fee":"Financing fee","floor":"Floor","has_apartment_sauna":"Sauna","has_balcony":"Balcony","has_terrace":"Terrace","has_yard":"Yard","kitchen_appliances":"Kitchen appliances","living_area":"Living area","loan_share":"Share of housing company loan","maintenance_fee":"Maintenance fee","other_fees":"Other fees","parking_fee":"Parking fee","parking_fee_explanation":"Parking fee explanation","project_acc_financeofficer":"Accountable finance officer","project_acc_salesperson":"Accountable sales person","project_apartment_count":"Number of apartments","project_application_end_time":"Application end time","project_application_start_time":"Application start time","project_attachment_urls":"Attachments / URL","project_building_type":"Building type","project_city":"City","project_construction_materials":"Construction materials","project_constructor":"Constructor","project_coordinate_lat":"Coordinate latitude","project_coordinate_lon":"Coordinate longitude","project_description":"Project description","project_district":"District","project_energy_class":"Energy class","project_estate_agent":"Estate agent","project_estate_agent_email":"Estate agent email","project_estate_agent_phone":"Estate agent telephone","project_estimated_completion":"Estimated completion","project_estimated_completion_date":"Estimated completion date","project_has_elevator":"Elevator","project_has_sauna":"Sauna","project_heating_options":"Heating options","project_holding_type":"Holding type","project_housing_company":"Housing company","project_housing_manager":"Housing manager","project_image_urls":"Images","project_main_image_url":"Main image","project_manager":"Project manager","project_material_choice_dl":"Material choice deadline","project_new_development_status":"New development status","project_new_housing":"New housing","project_ownership_type":"Ownership type","project_possession_transfer_date":"Transfer of possession","project_postal_code":"Postal code","project_premarketing_end_time":"Pre-marketing end time","project_premarketing_start_time":"Pre-marketing start time","project_publication_end_time":"Publication end time","project_publication_start_time":"Publication start time","project_realty_id":"Realty ID","project_roof_material":"Roof material","project_sanitation":"Sanitation","project_shareholder_meeting_date":"Shareholder meeting date","project_site_area":"Site area","project_site_renter":"Site renter","project_street_address":"Street address","project_virtual_presentation_url":"Virtual presentation","project_zoning_info":"Zoning information","project_zoning_status":"Zoning status","room_count":"Number of rooms","sales_price":"Sales price","services_description":"Services","showing_times":"Showing time","site_owner":"Site owner","storage_description":"Storage description","view_description":"View description","water_fee":"Water fee","water_fee_explanation":"Water fee explanation"}},"fi":{"SEARCH":{"all-apartments":"Kaikki asunnot","apartment":"Huoneisto","apartments":"asuntoa","apartments-available":"Huoneistoa vapaana","application-open":"Haku avoinna","applications":"Hakijatilanne","apply":"Luo hakemus","area":"Pinta-ala","error":"Virhe","floor":"Kerros","free-apartments":"Vapaat asunnot","free-of-debt-price":"Velaton hinta","info":"Tutustu","learn-more":"Tutustu kohteeseen","project":"kohde","show-as-list":"N\xe4yt\xe4 listana","show-on-map":"N\xe4yt\xe4 kartalla","something-wrong":"Uups, jokin meni pieleen.","total":"Yhteens\xe4","until":"asti","for-sale":"Vapaat asunnot","pre-marketing":"Enakkomyynniss\xe4"},"ES":{"additional_information":"Lis\xe4tiedot","apartment_number":"Huoneiston numero","apartment_structure":"Huoneiston kokoonpano","application_url":"Hakemuslinkki","balcony_description":"Parvekkeen lis\xe4tiedot","bathroom_appliances":"Kylpyhuoneen varusteet","condition":"Kunto","debt_free_sales_price":"Velaton kauppahinta","financing_fee":"P\xe4\xe4omavastike","floor":"Kerros","has_apartment_sauna":"Sauna","has_balcony":"Parveke","has_terrace":"Terassi","has_yard":"Piha","kitchen_appliances":"Keitti\xf6n varusteet","living_area":"Asuinpinta-ala","loan_share":"Yhti\xf6lainaosuus","maintenance_fee":"Hoitovastike","other_fees":"Muut kustannukset","parking_fee":"Autopaikka","parking_fee_explanation":"Autopaikan lis\xe4tiedot","project_acc_financeofficer":"Vastuu rakennuttaja-asiamies (talous)","project_acc_salesperson":"Vastuu rakennuttaja-asiamies (myynti)","project_apartment_count":"Huoneistojen lukum\xe4\xe4r\xe4","project_application_end_time":"Hakuajan p\xe4\xe4ttymisaika","project_application_start_time":"Hakuajan aloitusaika","project_attachment_urls":"Linkki materiaalipankkiin","project_building_type":"Rakennuksen tyyppi","project_city":"Postitoimipaikka","project_construction_materials":"Rakennusmateriaalit","project_constructor":"Rakentaja","project_coordinate_lat":"Leveyskoordinaatti","project_coordinate_lon":"Pituuskoordinaatti","project_description":"Kuvaus kohteesta","project_district":"Kaupunginosa / alue","project_energy_class":"Energialuokka","project_estate_agent":"Kiinteist\xf6nv\xe4litt\xe4j\xe4","project_estate_agent_email":"Kiinteist\xf6nv\xe4litt\xe4j\xe4n s\xe4hk\xf6posti","project_estate_agent_phone":"Kiinteist\xf6nv\xe4litt\xe4j\xe4n puhelinnumero","project_estimated_completion":"Arvioitu valmistumisaika (ennakkomarkkinoinnissa)","project_estimated_completion_date":"Arvioitu valmistumisaika (kauppakirjassa)","project_has_elevator":"Hissi","project_has_sauna":"Taloyhti\xf6ss\xe4 on sauna","project_heating_options":"L\xe4mmitysvaihtoehdot","project_holding_type":"Hallintamuoto","project_housing_company":"Taloyhti\xf6","project_housing_manager":"Is\xe4nn\xf6itsij\xe4","project_image_urls":"Kuvat","project_main_image_url":"P\xe4\xe4kuva","project_manager":"Projektip\xe4\xe4llikk\xf6","project_material_choice_dl":"Materiaalivalintojen p\xe4iv\xe4m\xe4\xe4r\xe4","project_new_development_status":"Uudiskohteen tila","project_new_housing":"Uudiskohde","project_ownership_type":"Asunnon omistusmuoto","project_possession_transfer_date":"Hallinnanluovutus (alustava)","project_postal_code":"Postinumero","project_premarketing_end_time":"Ennakkomarkkinoinnin p\xe4\xe4ttymisaika","project_premarketing_start_time":"Ennakkomarkkinoinnin alkamisaika","project_publication_end_time":"Julkaisun p\xe4\xe4ttymisaika","project_publication_start_time":"Julkaisun aloitusaika","project_realty_id":"Kiinteist\xf6tunnus","project_roof_material":"Kattomateriaali","project_sanitation":"Kiinteist\xf6nhoito","project_shareholder_meeting_date":"Osakkeenomistajien kokouksen p\xe4iv\xe4m\xe4\xe4r\xe4","project_site_area":"Tontin koko","project_site_renter":"Maan vuokraaja","project_street_address":"Osoite","project_virtual_presentation_url":"Kohteen virtuaaliesittely","project_zoning_info":"Kaavoitustiedot","project_zoning_status":"Kaavatilanne","room_count":"Huoneiden lukum\xe4\xe4r\xe4","sales_price":"Kauppahinta","services_description":"Palvelut","showing_times":"Esittelyaika","site_owner":"Tontin omistus","storage_description":"S\xe4ilytystilat","view_description":"N\xe4kym\xe4t","water_fee":"Vesimaksu","water_fee_explanation":"Vesimaksun lis\xe4tiedot"}}}')},93:function(e,t,a){e.exports={container:"RangeInput_container__3vnvJ"}},94:function(e,t,a){e.exports={priceInput:"PriceInput_priceInput__260fD"}},95:function(e,t,a){e.exports={collapsible:"Collapsible_collapsible__Iwhhu"}}},[[136,1,2]]]);
//# sourceMappingURL=main.a07a5cdc.chunk.js.map

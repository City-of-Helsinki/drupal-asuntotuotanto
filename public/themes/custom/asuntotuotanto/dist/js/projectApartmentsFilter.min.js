!function(t,a,e){"use strict";t.behaviors.projectApartmentsFilter={attach(t){a("project-apartments-filter-ui","[data-dropdown]",t).forEach((t=>{const a=e(t),n=a.find("[data-dropdown-toggle]"),r=n.attr("aria-controls"),i=r?e("#"+r):a.find(".filter-dropdown__content");function o(){return a.hasClass("is-open")}function c(){i.has(document.activeElement).length&&n.focus(),a.removeClass("is-open").attr("aria-expanded","false"),n.attr("aria-expanded","false").attr("aria-pressed","false"),i.attr("aria-hidden","true").attr("hidden",!0)}function d(){o()?c():function(){e("[data-dropdown].is-open").not(a).each((function(){const t=e(this),a=t.find("[data-dropdown-toggle]"),n=a.attr("aria-controls"),r=n?e("#"+n):t.find(".filter-dropdown__content");t.removeClass("is-open").attr("aria-expanded","false"),a.attr("aria-expanded","false").attr("aria-pressed","false"),r.attr("aria-hidden","true").attr("hidden",!0)})),a.addClass("is-open").attr("aria-expanded","true"),n.attr("aria-expanded","true").attr("aria-pressed","true"),i.attr("aria-hidden","false").removeAttr("hidden");const t=i.find('input,button,select,[tabindex]:not([tabindex="-1"])').get(0);t&&t.focus()}()}i.attr("aria-hidden","true").attr("hidden",!0),n.on("click",(t=>{t.preventDefault(),d()})),e(document).on("click",(t=>{!a.is(t.target)&&0===a.has(t.target).length&&o()&&c()})),e(document).on("keydown",(t=>{"Escape"===t.key&&o()&&c()}))})),a("project-apartments-filter","[data-filter-form]",t).forEach((t=>{const a=e(t),n=a.find("[data-filter-apply]"),r=a.find("[data-filter-rooms]"),i=a.find("[data-filter-area-min]"),o=a.find("[data-filter-area-max]"),c=a.find("[data-filter-price-max]"),d=a.find("[data-rooms-clear]"),s=a.find("[data-area-clear]"),l=a.find("[data-price-clear]"),p=a.closest(".project-apartments-listing"),f=p.find(".project__apartments--desktop tbody tr"),u=p.find(".project__apartments--mobile .project__apartments-item"),h=p.find("#project-apartments-count");function m(t){return t||0===t?parseFloat(String(t).replace(/\s/g,"").replace(",",".")):NaN}function g(t){return t||0===t?parseInt(String(t).replace(/\s/g,""),10):NaN}function v(){const t=[];return r.find('input[type="checkbox"]:checked').each((function(){t.push(e(this).val())})),t}function k(){d.prop("disabled",0===v().length)}function x(){const t=""!==String(i.val()).trim()||""!==String(o.val()).trim();s.prop("disabled",!t)}function b(){const t=""!==String(c.val()).trim();l.prop("disabled",!t)}d.on("click",(t=>{t.preventDefault(),r.find('input[type="checkbox"]').prop("checked",!1),k()})),s.on("click",(t=>{t.preventDefault(),i.val(""),o.val(""),x()})),l.on("click",(t=>{t.preventDefault(),c.val(""),b()})),r.on("change",k),i.on("input change",x),o.on("input change",x),c.on("input change",b),k(),x(),b(),n.on("click",(function(){const t=v(),a=m(i.val()),n=m(o.val()),r=g(c.val());let d=0;function s(e){const i=g(e.data("rooms")),o=m(e.data("area")),c=g(e.data("price")),s=function(t,a){return!a.length||!!(t>=5&&a.includes("5+"))||a.includes(String(t))}(i,t)&&function(t,a,e){const n=isFinite(a),r=isFinite(e);return!n&&!r||(!n||t>=a)&&(!r||t<=e)}(o,a,n)&&function(t,a){return!isFinite(a)||t<=a}(c,r);e.toggle(!!s),s&&d++}if(f.each((function(){s(e(this))})),u.each((function(){s(e(this))})),h.length){const t=h.html().replace(/\d+/,String(d));h.html(t)}k(),x(),b()}))}))}}}(Drupal,once,jQuery);
!function(t){function e(n){if(a[n])return a[n].exports;var r=a[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var a={};e.m=t,e.c=a,e.d=function(t,a,n){e.o(t,a)||Object.defineProperty(t,a,{enumerable:!0,get:n})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,a){if(1&a&&(t=e(t)),8&a)return t;if(4&a&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&a&&"string"!=typeof t)for(var r in t)e.d(n,r,function(e){return t[e]}.bind(null,r));return n},e.n=function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(a,"a",a),a},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="../",e(e.s=12)}({12:function(t,e,a){t.exports=a(13)},13:function(){((t,e)=>{jQuery(document).ajaxStop(()=>{const e=t("[id^=apartment_list_select_]");0<e.length&&e.is(":disabled")&&e.prop("disabled",!1)});const a=drupalSettings.path.currentLanguage,n={Delete:{fi:"Poista",en:"Delete"},Open:{fi:"Katso huoneistoa",en:"Open apartment page"},Apartment:{fi:"huoneisto",en:"apartment"},Add:{fi:"Lis채채 uusi huoneisto",en:"Add an apartment to the list"},Updated:{fi:"Huoneistojen j채rjestys on p채ivitetty",en:"Apartment list order has been updated."}},r=document.getElementsByClassName("sr-information-box")[0],i=document.getElementById("application_form_apartments_list"),o=()=>i.getElementsByClassName("application-form__apartments-item").length,l=()=>{const t=document.querySelector('[data-drupal-selector="edit-apartment-0-id"]').parentElement.parentElement.parentElement.parentElement.parentElement,e=t.children.length;return t.children[e-1].getElementsByTagName("select")[0]},s=()=>[...document.querySelectorAll('[data-drupal-selector="edit-apartment"] > table select')].filter(t=>t.getAttribute("data-drupal-selector").includes("-id")).map(t=>t.value).filter(t=>"0"!==t);new MutationObserver(t=>{t.forEach(t=>{if("childList"===t.type){[...document.getElementsByClassName("application-form__apartments-item")].map(t=>{const e=t.querySelectorAll("button[data-list-position-action-button]"),a=[...t.parentElement.children].indexOf(t);t.classList.contains("application-form__apartments-item--with-select")||(0===a&&!t.nextElementSibling.classList.contains("application-form__apartments-item--with-select")&&(e[0].disabled=!0,e[1].disabled=!1),0<a&&a<o()-1&&(t.nextElementSibling.classList.contains("application-form__apartments-item--with-select")?(e[0].disabled=!1,e[1].disabled=!0):(e[0].disabled=!1,e[1].disabled=!1)),a===o()-1&&(e[0].disabled=!1,e[1].disabled=!0))})}})}).observe(i,{childList:!0});const p=(t,a,n)=>{const r=document.createElement("p");r.classList.add(...t);const i=document.createElement("span"),o=document.createTextNode(e.t(a));i.classList.add("visually-hidden"),i.appendChild(o);const l=document.createElement("span"),s=document.createTextNode(n);return l.appendChild(s),r.append(i,l),r},d=(t,a,n=!1)=>{const r=document.createElement("button");r.classList.add(...t);const i=document.createElement("span"),o=document.createTextNode(e.t(a));return i.append(o),r.append(i),r.setAttribute("type","button"),n&&(r.disabled=!0),r},c=(t,a)=>{const n=document.createElement("li"),r=document.createElement("span"),i=document.createTextNode(e.t(t));r.appendChild(i);const o=document.createElement("span"),l=document.createTextNode(e.t(a));return o.appendChild(l),n.append(r,o),n},m=()=>{const t=document.createElement("div");t.classList.add("application-form-apartment__apartment-add-actions-wrapper");const i=o()-1,p="apartment_list_select_"+i,d=document.createElement("div");d.classList.add("hds-select-element");const c=document.createElement("label"),m=document.createTextNode(n.Apartment[a]);c.appendChild(m),c.setAttribute("for",p);const u=document.createElement("div");u.classList.add("hds-select-element__select-wrapper");const f=s(),_=l().cloneNode(!0);[..._.options].map((t,e)=>{if(0<e){const e=t.innerHTML.split(" | ");t.innerHTML=`${e[0]} | ${e[1]} | ${e[3]}`}}),_.classList.add("hds-select-element__select"),_.setAttribute("id",p),_.setAttribute("data-id",i),_.setAttribute("data-drupal-selector","custom_apartment_select");return[..._.options].filter(t=>f.includes(t.value)).forEach(t=>{_.removeChild(t)}),_.addEventListener("change",({target:t})=>{const a=document.querySelector(`[data-drupal-selector="edit-apartment-${i}-id"]`),n=document.getElementsByClassName("application-form-apartment__apartment-add-button")[0],l=t.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement;l.setAttribute("data-id",i),a.value=t.value,a.dispatchEvent(new Event("change")),l.classList.remove("application-form__apartments-item--with-select");const s=a.options[a.selectedIndex].text.split(" | "),p={apartment_number:s[0],apartment_structure:s[1],apartment_floor:s[2],apartment_living_area_size:s[3],apartment_sales_price:s[4],apartment_debt_free_sales_price:s[5]};l.innerHTML=E(p,t.value).innerHTML;const d=document.createElement("p");d.appendChild(document.createTextNode(e.t("Apartment list has been updated."))),r.append(d);const c=[...l.parentElement.children].indexOf(l);0===c&&(l.querySelector("button").disabled=!0),c===o()-1&&(l.querySelector('button[data-list-position-action-button="lower"]').disabled=!0),0<c&&(l.previousElementSibling.querySelector('button[data-list-position-action-button="lower"]').disabled=!1),l.nextElementSibling.classList.contains("application-form__apartments-item--with-select")&&(l.querySelector('button[data-list-position-action-button="lower"]').disabled=!0),n&&(n.removeAttribute("disabled"),n.focus())}),u.appendChild(_),d.append(c,u),t.appendChild(d),t},u=(t,e=[])=>{const a=document.createElement(t);return a.classList.add(...e),a},f=t=>{const e=t.parentElement.parentElement.parentElement,i=e.previousElementSibling;if(null!==i){i.before(e);const o=v(t),l=A(o);jQuery("#application_form_apartments_list").children("li").each((t,e)=>{const a=jQuery(e).first().find(".application-form-apartment__apartment-number").first().find("span").last()[0].textContent;y().filter((function(){return jQuery(this).find("option:selected").text().includes(a)})).first().closest("tr").find("[id$=-weight]")[0].value=t}),l[0].change(),setTimeout(()=>{t.disabled?t.nextElementSibling.focus():t.focus()},10);const s=document.createElement("p");s.appendChild(document.createTextNode(n.Updated[a])),r.append(s)}},_=t=>{const a=t.parentElement.parentElement.parentElement,n=a.nextElementSibling;if(null!==n&&!n.classList.contains("application-form__apartments-item--with-select")){n.after(a);const i=v(t),o=A(i);jQuery("#application_form_apartments_list").children("li").each((t,e)=>{const a=jQuery(e).first().find(".application-form-apartment__apartment-number").first().find("span").last()[0].textContent;y().filter((function(){return jQuery(this).find("option:selected").text().includes(a)})).first().closest("tr").find("[id$=-weight]")[0].value=t}),o[0].change(),setTimeout(()=>{t.disabled?t.previousElementSibling.focus():t.focus()},10);const l=document.createElement("p");l.appendChild(document.createTextNode(e.t("Apartment list order has been updated."))),r.append(l)}},b=({target:t})=>{"raise"===t.getAttribute("data-list-position-action-button")&&f(t),"lower"===t.getAttribute("data-list-position-action-button")&&_(t),"application-form-apartment__apartment-delete-button"===t.getAttribute("class")&&(t=>{jQuery(".application-form-apartment__apartment-delete-button").each((t,e)=>{jQuery(e).prop("disabled",!0)});const e=t.parentElement.parentElement.parentElement,a=v(t),n=A(a),r=n.closest("tr").find(":submit")[0];n.val(0),n.change(),e.innerHTML="<div class='application-form-apartment-loader-wrapper'><div class='application-form-apartment-loader'></div></div>",console.log(r),setTimeout(()=>{jQuery(r).trigger("mousedown"),e.remove(),jQuery(".application-form-apartment__apartment-delete-button").each((t,e)=>{jQuery(e).prop("disabled",!1)})},750)})(t)},h=({target:e})=>{const a=t('[data-drupal-selector="edit-apartment-add-more"]');5>=o()&&1<o()&&"0"!==l().value&&a.mousedown();const n=e.parentElement;e.parentElement.parentElement.parentElement.parentElement.addEventListener("click",b),n.appendChild(m()),e.remove(),(()=>{const t=document.querySelectorAll('[data-drupal-selector="custom_apartment_select"]');t[t.length-1].focus()})(),5>o()&&g()},E=(t,r,i=!1)=>{let{apartment_number:l,apartment_structure:s,apartment_floor:m,apartment_living_area_size:f,apartment_sales_price:_,apartment_debt_free_sales_price:b}=t;const E=0<document.querySelectorAll("[data-drupal-selector='asu-application-haso-form']").length?"HASO":"hitas",g=u("li",["application-form__apartments-item"]);i&&g.classList.add("application-form__apartments-item--with-select");const y=u("article",["application-form-apartment"]),v=p(["application-form-apartment__list-position","is-desktop"],"List position",""),A=u("div",["application-form-apartment__header"]),x=p(["application-form-apartment__list-position","is-mobile"],"List position",""),L=p(["application-form-apartment__apartment-number"],"Apartment",l),S=p(["application-form-apartment__apartment-structure"],"Apartment structure",s),w=d(["application-form-apartment__apartment-add-button"],n.Add[a]);w.addEventListener("click",h),0<o()&&w.setAttribute("disabled",!0),i?A.append(x,w):A.append(x,L,S);const j=document.createElement("div");j.classList.add("application-form-apartment__list-position-actions");const C=d("","Raise on the list, apartment "+l,i&&!0);C.setAttribute("data-list-position-action-button","raise");const T=d("","Lower on the list, apartment "+l,i&&!0);T.setAttribute("data-list-position-action-button","lower"),j.append(C,T);const N=u("ul",["application-form-apartment__information"]),O=c("Floor",m),Q=c("Living area size",f);let $="",q="";"HASO"==E?($=e.t("Right of occupancy payment"),q="",b=""):($=e.t("Sales price"),q=e.t("Debt free sales price"));const M=c($,_),B=c(q,b);N.append(O,Q,M,B);const H=u("div",["application-form-apartment__actions"]),D=d(["application-form-apartment__apartment-delete-button"],n.Delete[a]);D.setAttribute("aria-label",`${n.Delete[a]}, ${n.Apartment[a]} ${l}`);const P=document.createElement("a"),k=document.createTextNode(n.Open[a]);return P.appendChild(k),P.setAttribute("href",`${window.location.origin}/node/${r}`),P.setAttribute("aria-label",`${n.Open[a]}, ${n.Apartment[a]} ${l}`),H.append(D,P),i?y.append(v,A,j):y.append(v,A,j,N,H),g.appendChild(y),g},g=()=>{i.append(E({},null,!0))},y=()=>t('[data-drupal-selector="edit-apartment"] > table select'),v=t=>jQuery(t.parentElement.parentElement.parentElement).first().find(".application-form-apartment__apartment-number").first().find("span").last()[0].textContent,A=e=>t('[data-drupal-selector="edit-apartment"] > table select').filter((function(){return jQuery(this).find("option:selected").text().includes(e)})).first();window.onload=()=>{if(0<s().length){if([...document.querySelectorAll('[data-drupal-selector="edit-apartment"] > table select')].filter(t=>t.getAttribute("data-drupal-selector").includes("-id")).filter(t=>"0"!==t.value).map(t=>{const e=t.options[t.selectedIndex].text.split(" | "),a={apartment_number:e[0],apartment_structure:e[1],apartment_floor:e[2],apartment_living_area_size:e[3],apartment_sales_price:e[4],apartment_debt_free_sales_price:e[5]};i.append(E(a,t.value,!1))}),1===o()){[...document.getElementsByClassName("application-form__apartments-item")[0].querySelectorAll("[data-list-position-action-button]")].map(t=>{t.disabled=!0})}if(5>o()){g();const t=document.getElementsByClassName("application-form-apartment__apartment-add-button")[0];t&&t.removeAttribute("disabled")}}0===o()&&g();const t=document.getElementsByClassName("application-form__apartments-item");0<t.length&&[...t].map((t,e)=>{t.setAttribute("data-id",e),t.addEventListener("click",b)})}})(jQuery,Drupal)}});
!function(t){function e(n){if(a[n])return a[n].exports;var r=a[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var a={};e.m=t,e.c=a,e.d=function(t,a,n){e.o(t,a)||Object.defineProperty(t,a,{enumerable:!0,get:n})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,a){if(1&a&&(t=e(t)),8&a)return t;if(4&a&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&a&&"string"!=typeof t)for(var r in t)e.d(n,r,function(e){return t[e]}.bind(null,r));return n},e.n=function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(a,"a",a),a},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="../",e(e.s=12)}({12:function(t,e,a){t.exports=a(13)},13:function(){var t,e;t=jQuery,(e=Drupal).behaviors.applicationFormActions={attach:function(){t(document).ajaxStop(()=>{const e=t("[id^=apartment_list_select_]");0<e.length&&e.is(":disabled")&&e.prop("disabled",!1)});const a=document.getElementsByClassName("sr-information-box")[0],n=document.getElementById("application_form_apartments_list"),r=()=>n.getElementsByClassName("application-form__apartments-item").length,i=()=>{const t=document.querySelector('[data-drupal-selector="edit-apartment-0-id"]').parentElement.parentElement.parentElement.parentElement.parentElement,e=t.children.length;return t.children[e-1].getElementsByTagName("select")[0]},l=()=>[...document.querySelectorAll('[data-drupal-selector="edit-apartment"] > table select')].filter(t=>t.getAttribute("data-drupal-selector").includes("-id")).map(t=>t.value).filter(t=>"0"!==t);new MutationObserver(t=>{t.forEach(t=>{"childList"===t.type&&[...document.getElementsByClassName("application-form__apartments-item")].map(t=>{const e=t.querySelectorAll("button[data-list-position-action-button]"),a=[...t.parentElement.children].indexOf(t);t.classList.contains("application-form__apartments-item--with-select")||(0===a&&!t.nextElementSibling.classList.contains("application-form__apartments-item--with-select")&&(e[0].disabled=!0,e[1].disabled=!1),0<a&&a<r()-1&&(t.nextElementSibling.classList.contains("application-form__apartments-item--with-select")?(e[0].disabled=!1,e[1].disabled=!0):(e[0].disabled=!1,e[1].disabled=!1)),a===r()-1&&(e[0].disabled=!1,e[1].disabled=!0))})})}).observe(n,{childList:!0});const o=(t,a,n)=>{const r=document.createElement("p");r.classList.add(...t);const i=document.createElement("span"),l=document.createTextNode(e.t(a));i.classList.add("visually-hidden"),i.appendChild(l);const o=document.createElement("span"),s=document.createTextNode(n);return o.appendChild(s),r.append(i,o),r},s=(t,a,n=!1)=>{const r=document.createElement("button");r.classList.add(...t);const i=document.createElement("span"),l=document.createTextNode(e.t(a));return i.append(l),r.append(i),r.setAttribute("type","button"),n&&(r.disabled=!0),r},d=(t,a)=>{const n=document.createElement("li"),r=document.createElement("span"),i=document.createTextNode(e.t(t));r.appendChild(i);const l=document.createElement("span"),o=document.createTextNode(e.t(a));return l.appendChild(o),n.append(r,l),n},p=()=>{const t=document.createElement("div");t.classList.add("application-form-apartment__apartment-add-actions-wrapper");const n=r()-1,o="apartment_list_select_"+n,s=document.createElement("div");s.classList.add("hds-select-element");const d=document.createElement("label"),p=document.createTextNode(e.t("Apartment"));d.appendChild(p),d.setAttribute("for",o);const c=document.createElement("div");c.classList.add("hds-select-element__select-wrapper");const m=l(),u=i().cloneNode(!0);return[...u.options].map((t,e)=>{if(0<e){const e=t.innerHTML.split(" | ");t.innerHTML=`${e[0]} | ${e[1]} | ${e[3]}`}}),u.classList.add("hds-select-element__select"),u.setAttribute("id",o),u.setAttribute("data-id",n),u.setAttribute("data-drupal-selector","custom_apartment_select"),[...u.options].filter(t=>m.includes(t.value)).forEach(t=>{u.removeChild(t)}),u.addEventListener("change",({target:t})=>{const i=document.querySelector(`[data-drupal-selector="edit-apartment-${n}-id"]`),l=document.getElementsByClassName("application-form-apartment__apartment-add-button")[0],o=t.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement;o.setAttribute("data-id",n),i.value=t.value,i.dispatchEvent(new Event("change")),o.classList.remove("application-form__apartments-item--with-select");const s=i.options[i.selectedIndex].text.split(" | "),d={apartment_number:s[0],apartment_structure:s[1],apartment_floor:s[2],apartment_living_area_size:s[3],apartment_sales_price:s[4],apartment_debt_free_sales_price:s[5]};o.innerHTML=f(d,t.value).innerHTML;const p=document.createElement("p");p.appendChild(document.createTextNode(e.t("Apartment list has been updated."))),a.append(p);const c=[...o.parentElement.children].indexOf(o);0===c&&(o.querySelector("button").disabled=!0),c===r()-1&&(o.querySelector('button[data-list-position-action-button="lower"]').disabled=!0),0<c&&(o.previousElementSibling.querySelector('button[data-list-position-action-button="lower"]').disabled=!1),o.nextElementSibling.classList.contains("application-form__apartments-item--with-select")&&(o.querySelector('button[data-list-position-action-button="lower"]').disabled=!0),l&&(l.removeAttribute("disabled"),l.focus())}),c.appendChild(u),s.append(d,c),t.appendChild(s),t},c=(t,e=[])=>{const a=document.createElement(t);return a.classList.add(...e),a},m=(t,e)=>{const a=document.querySelector(`[name="apartment[${t}][_weight]"]`),n=document.querySelector(`[name="apartment[${e}][_weight]"]`),r=a.value;a.value=n.value,n.value=r},u=e=>{const a=e.parentElement.parentElement.parentElement,n=t('[data-drupal-selector="edit-apartment"] > table select').filter((function(){return 0<=t(this).attr("data-drupal-selector").indexOf("-id")&&t(this).children("option:selected").val()&&0<=t(this).attr("data-drupal-selector").indexOf(a.getAttribute("data-id"))?t(this):null}));n.val(0),n.change(),a.innerHTML="<div class='application-form-apartment-loader-wrapper'><div class='application-form-apartment-loader'></div></div>",setTimeout(()=>window.location.reload(),500)},b=({target:t})=>{"raise"===t.getAttribute("data-list-position-action-button")&&(t=>{const n=t.parentElement.parentElement.parentElement,r=n.previousElementSibling;if(null!==r){r.before(n);const i=document.querySelector(`[data-drupal-selector="edit-apartment-${n.getAttribute("data-id")}-id"]`);m(n.getAttribute("data-id"),r.getAttribute("data-id")),i.dispatchEvent(new Event("change")),setTimeout(()=>{t.disabled?t.nextElementSibling.focus():t.focus()},10);const l=document.createElement("p");l.appendChild(document.createTextNode(e.t("Apartment list order has been updated."))),a.append(l)}})(t),"lower"===t.getAttribute("data-list-position-action-button")&&(t=>{const n=t.parentElement.parentElement.parentElement,r=n.nextElementSibling;if(null!==r&&!r.classList.contains("application-form__apartments-item--with-select")){r.after(n);const i=document.querySelector(`[data-drupal-selector="edit-apartment-${n.getAttribute("data-id")}-id"]`);m(n.getAttribute("data-id"),r.getAttribute("data-id")),i.dispatchEvent(new Event("change")),setTimeout(()=>{t.disabled?t.previousElementSibling.focus():t.focus()},10);const l=document.createElement("p");l.appendChild(document.createTextNode(e.t("Apartment list order has been updated."))),a.append(l)}})(t),"application-form-apartment__apartment-delete-button"===t.getAttribute("class")&&u(t)},_=({target:e})=>{const a=t('[data-drupal-selector="edit-apartment-add-more"]');5>=r()&&1<r()&&"0"!==i().value&&a.mousedown();const n=e.parentElement;e.parentElement.parentElement.parentElement.parentElement.addEventListener("click",b),n.appendChild(p()),e.remove(),(()=>{const t=document.querySelectorAll('[data-drupal-selector="custom_apartment_select"]');t[t.length-1].focus()})(),5>r()&&E()},f=(t,a,n=!1)=>{const{apartment_number:i,apartment_structure:l,apartment_floor:p,apartment_living_area_size:m,apartment_sales_price:u,apartment_debt_free_sales_price:b}=t,f=c("li",["application-form__apartments-item"]);n&&f.classList.add("application-form__apartments-item--with-select");const E=c("article",["application-form-apartment"]),h=o(["application-form-apartment__list-position","is-desktop"],"List position",""),g=c("div",["application-form-apartment__header"]),v=o(["application-form-apartment__list-position","is-mobile"],"List position",""),y=o(["application-form-apartment__apartment-number"],"Apartment",i),A=o(["application-form-apartment__apartment-structure"],"Apartment structure",l),x=s(["application-form-apartment__apartment-add-button"],"Add an apartment to the list");x.addEventListener("click",_),0<r()&&x.setAttribute("disabled",!0),n?g.append(v,x):g.append(v,y,A);const L=document.createElement("div");L.classList.add("application-form-apartment__list-position-actions");const w=s("","Raise on the list, apartment "+i,n&&!0);w.setAttribute("data-list-position-action-button","raise");const S=s("","Lower on the list, apartment "+i,n&&!0);S.setAttribute("data-list-position-action-button","lower"),L.append(w,S);const C=c("ul",["application-form-apartment__information"]),T=d("Floor",p),N=d("Living area size",m),q=d("Sales price",u),O=d("Debt free sales price",b);C.append(T,N,q,O);const M=c("div",["application-form-apartment__actions"]),$=s(["application-form-apartment__apartment-delete-button"],"Delete");$.setAttribute("aria-label","Delete, aparment "+i);const j=document.createElement("a"),B=document.createTextNode(e.t("Open apartment page"));return j.appendChild(B),j.setAttribute("href",`${window.location.origin}/node/${a}`),j.setAttribute("aria-label","Open apartment page, aparment "+i),M.append($,j),n?E.append(h,g,L):E.append(h,g,L,C,M),f.appendChild(E),f},E=()=>{n.append(f({},null,!0))};window.onload=()=>{if(0<l().length&&([...document.querySelectorAll('[data-drupal-selector="edit-apartment"] > table select')].filter(t=>t.getAttribute("data-drupal-selector").includes("-id")).filter(t=>"0"!==t.value).map(t=>{const e=t.options[t.selectedIndex].text.split(" | "),a={apartment_number:e[0],apartment_structure:e[1],apartment_floor:e[2],apartment_living_area_size:e[3],apartment_sales_price:e[4],apartment_debt_free_sales_price:e[5]};n.append(f(a,t.value,!1))}),1===r()&&[...document.getElementsByClassName("application-form__apartments-item")[0].querySelectorAll("[data-list-position-action-button]")].map(t=>{t.disabled=!0}),5>r())){E();const t=document.getElementsByClassName("application-form-apartment__apartment-add-button")[0];t&&t.removeAttribute("disabled")}0===r()&&E();const t=document.getElementsByClassName("application-form__apartments-item");0<t.length&&[...t].map((t,e)=>{t.setAttribute("data-id",e),t.addEventListener("click",b)})}}}}});